(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{100:function(e,t,n){e.exports={itemContainer:"expenseList_itemContainer__3nIar",description:"expenseList_description__2Vvk5",buttonDelete:"expenseList_buttonDelete__39kxC"}},138:function(e,t,n){e.exports={spinier:"addExpense_spinier__35SuI"}},144:function(e,t,n){e.exports={layout_content:"layout_layout_content__2Nu44"}},158:function(e,t,n){},235:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(28),c=n.n(s),i=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,256)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))},o=n(59),u=(n(156),n(157),n(158),n(50)),l=n(135),d=n(146),p=n(20),f="AUTH_FETCH_START",j="AUTH_FETCH_FAIL",h="AUTH_FETCH_SUCCESS",S="AUTH_LOGOUT";var b={const:{AUTH_FETCH_START:f,AUTH_FETCH_FAIL:j,AUTH_FETCH_SUCCESS:h,AUTH_LOGOUT:S},requestStepsAC:{fetchStart:function(){return{type:f}},fetchFail:function(e){return{type:j,payload:e}},fetchSuccess:function(e){var t={};return e.userId>0&&(t={userId:e.userId,userName:e.userName,isAuthenticated:!0}),{type:h,payload:t}}},other:{authLogoutAC:function(){return{type:S}}}},E={userId:null,userName:null,isAuthenticated:!1,request:{fetchStart:!1,fetchFail:!1,error:{message:""},fetchSuccess:!1}};var x=n(145),O="EXPENSE_ITEMS_LIST_FETCH_START",_="EXPENSE_ITEMS_LIST_FETCH_FAIL",m="EXPENSE_ITEMS_LIST_FETCH_SUCCESS",y="EXPENSE_ITEM_SELECTED";var g={const:{EXPENSE_ITEMS_LIST_FETCH_START:O,EXPENSE_ITEMS_LIST_FETCH_FAIL:_,EXPENSE_ITEMS_LIST_FETCH_SUCCESS:m,EXPENSE_ITEM_SELECTED:y},requestStepsAC:{fetchStart:function(){return{type:O}},fetchFail:function(e){return{type:_,payload:e}},fetchSuccess:function(e){return{type:m,payload:{itemsArray:e}}}},otherActionCreators:{expenseItemSelectedAC:function(e){return{type:y,payload:{selectedId:e}}}}},C={expenseList:[],selectedExpense:null,request:{fetchStart:!1,fetchFail:!1,error:{message:""},fetchSuccess:!1}};function T(e){return!isNaN(parseFloat(e))&&isFinite(e)}function v(e,t){var n={const:{start:"".concat(e.toUpperCase(),"_FETCH_START"),fail:"".concat(e.toUpperCase(),"_FETCH_FAIL"),success:"".concat(e.toUpperCase(),"_FETCH_SUCCESS")},requestStepsAC:{fetchStart:function(){return{type:n.const.start}},fetchFail:function(e){return{type:n.const.fail,payload:e}},fetchSuccess:function(e){return{type:n.const.success,payload:t(e)}}}};return n}function I(e){var t=e.actions,n=e.initialState,a=e.startStateChange,r=void 0===a?function(e){return e}:a,s=e.successStateChange,c=void 0===s?function(e){return e}:s;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case t.const.start:return r(Object(p.a)(Object(p.a)({},e),{request:{fetchStart:!0,fetchFail:!1,fetchSuccess:!1,error:{message:""}}}));case t.const.fail:return console.log("reducer",t.const.fail),Object(p.a)(Object(p.a)({},e),{request:{fetchStart:!1,fetchFail:!0,fetchSuccess:!1,error:{message:a.payload.message}}});case t.const.success:return c(Object(p.a)(Object(p.a)({},e),{request:{fetchStart:!1,fetchFail:!1,fetchSuccess:!0,error:{message:""}}}),a.payload);default:return e}}}var L=v("EXPENSE_GROUPS_LIST",(function(e){return e}));L.const.EXPENSE_GROUP_SELECTED="EXPENSE_GROUP_SELECTED",L.otherActionCreators={expenseGroupSelectedAC:function(e){return{type:L.const.EXPENSE_GROUP_SELECTED,payload:{selectedId:e}}}};var A=I({actions:L,initialState:{expenseGroup:[],selectedGroup:null,request:{fetchStart:!1,fetchFail:!1,error:{message:""},fetchSuccess:!1}},successStateChange:function(e,t){return e.expenseGroup=t,e}});var F="MENU_ITEM_SELECTED";var N={selectedIndex:"1"};var w=v("EXPENSE_LIST",(function(e){return e})),P=v("EXPENSE_LIST_DELETE",(function(e){return e}));P.const.EXPENSE_LIST_DELETE="EXPENSE_LIST_DELETE",P.otherActionCreators={deleteAC:function(e){return{type:P.const.EXPENSE_LIST_DELETE,payload:{deletedId:e}}}};var U={fetchStart:!1,fetchFail:!1,error:{message:""},fetchSuccess:!1},H={expenseList:[],request:Object(p.a)(Object(p.a)({},U),{},{error:Object(p.a)({},U.error)})},q=I({actions:w,initialState:H,successStateChange:function(e,t){return e.expenseList=t,e}}),M={status:0,request:Object(p.a)(Object(p.a)({},U),{},{error:Object(p.a)({},U.error)})},G=(I({actions:P,initialState:M,successStateChange:function(e,t){return e.status=t.status,e}}),Object(u.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,n=Object(p.a)(Object(p.a)({},e),{},{request:Object(p.a)(Object(p.a)({},e.request),{},{error:Object(p.a)({},e.request.error)})});function a(e,t,a){n.request.fetchStart=e,n.request.fetchFail=t,n.request.fetchSuccess=a,t||(n.request.error={message:""}),e&&(n.userId=null,n.userName=null,n.isAuthenticated=!1)}switch(t.type){case b.const.AUTH_FETCH_START:return a(!0,!1,!1),n;case b.const.AUTH_FETCH_FAIL:return a(!1,!0,!1),n.request.error={message:t.payload.message},console.log(n),n;case b.const.AUTH_FETCH_SUCCESS:var r;return a(!1,!1,!0),n.userId=t.payload.isAuthenticated?t.payload.userId:null,n.userName=t.payload.isAuthenticated?t.payload.userName:null,n.isAuthenticated=(null===(r=t.payload)||void 0===r?void 0:r.isAuthenticated)||!1,n;case b.const.AUTH_LOGOUT:return n.isAuthenticated=!1,n.userName=null,n.userId=null,n;default:return e}},expenseItemsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0,n=Object(p.a)(Object(p.a)({},e),{},{request:Object(p.a)(Object(p.a)({},e.request),{},{error:Object(p.a)({},e.request.error)})});function a(e,t,a){n.request.fetchStart=e,n.request.fetchFail=t,n.request.fetchSuccess=a,t||(n.request.error={message:""}),e&&(n.expenseList=[])}switch(t.type){case g.const.EXPENSE_ITEMS_LIST_FETCH_START:return a(!0,!1,!1),n;case g.const.EXPENSE_ITEMS_LIST_FETCH_FAIL:return a(!1,!0,!1),n.request.error={message:t.payload.message},n;case g.const.EXPENSE_ITEMS_LIST_FETCH_SUCCESS:return a(!1,!1,!0),n.expenseList=Object(x.a)(t.payload.itemsArray),n;case g.const.EXPENSE_ITEM_SELECTED:return n.selectedExpense={id:t.payload.selectedId,name:n.expenseList.filter((function(e){return e.id===t.payload.selectedId}))[0].name},n;default:return e}},expenseGroupList:function(e,t){switch(t.type){case L.const.EXPENSE_GROUP_SELECTED:return Object(p.a)(Object(p.a)({},e),{selectedGroup:{id:t.payload.selectedId,name:e.expenseGroup.filter((function(e){return e.id===t.payload.selectedId}))[0].name}});default:return A(e,t)}},menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return{selectedIndex:t.payload};default:return e}},expenseList:q})),k=n(48),D=n.n(k),R=n(81),X=D.a.mark(J),z=D.a.mark(V),W=D.a.mark(K),Y=D.a.mark(Z),B=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function J(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Hello Sagas!");case 1:case"end":return e.stop()}}),X)}function V(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.b)(B,1e3);case 2:return e.next=4,Object(R.c)({type:"INCREMENT"});case 4:case"end":return e.stop()}}),z)}function K(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.d)("INCREMENT_ASYNC",V);case 2:case"end":return e.stop()}}),W)}function Z(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.a)([J(),K()]);case 2:case"end":return e.stop()}}),Y)}var Q=Z,$=Object(d.a)(),ee=Object(u.createStore)(G,Object(l.composeWithDevTools)(Object(u.applyMiddleware)($)));$.run(Q);var te={backURL:"https://michael-916310-budget-back.herokuapp.com/budget"},ne=function(){return Object(o.b)()},ae=o.c,re=ee.dispatch;function se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;re(n.fetchStart()),fetch(te.backURL+e,t).then((function(e){if(e.ok)return e.json();throw new Error("".concat(e.status,": ").concat(e.statusText))})).then((function(e){re(n.fetchSuccess(JSON.parse(e)))})).catch((function(e){re(n.fetchFail({message:e.message}))}))}var ce=n(47),ie=n(245),oe=n(242),ue=n(58),le=n(238),de=n(250),pe=n(251),fe=n(49),je=n.n(fe);var he=n(7);function Se(){var e=Object(a.useState)(""),t=Object(ce.a)(e,2),n=t[0],r=t[1];function s(e){r("".concat(n).concat(e.value))}var c=[{display:"1",value:"1",action:s},{display:"2",value:"2",action:s},{display:"3",value:"3",action:s},{display:"4",value:"4",action:s},{display:"5",value:"5",action:s},{display:"6",value:"6",action:s},{display:"7",value:"7",action:s},{display:"8",value:"8",action:s},{display:"9",value:"9",action:s},{display:"0",value:"0",action:s},{displayIcon:Object(he.jsx)(de.a,{}),value:"backspace",action:function(){r(n.substring(0,n.length-1))}},{displayIcon:Object(he.jsx)(pe.a,{}),value:"send",action:function(){var e;e=n,se("/user/check",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({userCode:e})},Object(p.a)({},b.requestStepsAC))}}],i=ae((function(e){return e.auth.request.fetchStart})),o=ae((function(e){return e.auth.request.fetchFail})),u=ae((function(e){return e.auth.request.error.message}));return Object(he.jsxs)("main",{className:je.a.main,children:[Object(he.jsxs)("section",{className:je.a.container,children:[Object(he.jsx)("article",{className:je.a.warningWrapper,children:o&&Object(he.jsx)(ie.a,{status:"warning",title:u})}),Object(he.jsx)("article",{className:je.a.inputControlWrapper,children:Object(he.jsx)(oe.a,{readOnly:!0,className:je.a.inputControl,value:n})}),Object(he.jsx)("article",{className:je.a.btnContainer,children:c.map((function(e){return Object(he.jsx)(ue.a,{shape:"round",onClick:function(){e.action(e)},className:je.a.btn,disabled:i,children:e.display?e.display:e.displayIcon},e.value)}))})]}),i&&Object(he.jsx)(le.a,{size:"large",className:je.a.spinier})]})}var be=n(240),Ee=n(247),xe=n(254),Oe=n(99),_e=n(255),me=n(40),ye=n.n(me),ge=n(239),Ce=n(241),Te=n(243),ve=n(252),Ie=n(141),Le=n.n(Ie),Ae=n(246);function Fe(){var e=ne(),t=ae((function(e){return e.expenseGroupList.expenseGroup})),n=(t=t.filter((function(e){return!e.obsolete}))).filter((function(e){return e.defaultSelection}));return ae((function(e){return e.expenseGroupList.selectedGroup}))||Array.isArray(n)&&n.length>0&&e(L.otherActionCreators.expenseGroupSelectedAC(n[0].id)),Object(he.jsx)(Ae.a.Group,{size:"large",optionType:"button",buttonStyle:"outline",defaultValue:Array.isArray(n)&&n.length>0?n[0].id:-1,style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},onChange:function(t){e(L.otherActionCreators.expenseGroupSelectedAC(t.target.value))},children:t.map((function(e){return Object(he.jsx)(Ae.a.Button,{value:e.id,children:e.name},e.id)}))})}var Ne=n(244),we=Ne.a.Panel;function Pe(){var e=ae((function(e){return e.expenseItemsList.expenseList})),t=e.filter((function(e){return e.oftenUsed>0})),n=e.filter((function(e){return 0===e.oftenUsed})),a=ne();function r(e){return e.map((function(e){return Object(he.jsx)(Ae.a.Button,{value:e.id,style:{margin:"1px",minWidth:"7rem"},children:e.name},e.id)}))}return Object(he.jsxs)(Ae.a.Group,{buttonStyle:"solid",style:{textAlign:"center",display:"flex",flexWrap:"wrap",justifyContent:"space-between"},size:"large",onChange:function(e){a(g.otherActionCreators.expenseItemSelectedAC(e.target.value))},children:[r(t),Object(he.jsx)(Ne.a,{style:{width:"100%"},children:Object(he.jsx)(we,{header:"\u0434\u0440\u0443\u0433\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438",children:Object(he.jsx)("div",{style:{textAlign:"center",display:"flex",flexWrap:"wrap",justifyContent:"space-between"},children:r(n)})},"1")})]})}var Ue=n(138),He=n.n(Ue);function qe(){var e=["DD/MM/YYYY","DD/MM/YY"],t=ae((function(e){var t;return null===(t=e.expenseItemsList.selectedExpense)||void 0===t?void 0:t.id})),n=ae((function(e){var t;return null===(t=e.expenseItemsList.selectedExpense)||void 0===t?void 0:t.name})),r=ae((function(e){return e.expenseGroupList.selectedGroup})),s=Object(a.useState)(new Date),c=Object(ce.a)(s,2),i=c[0],o=c[1],u=Object(a.useState)(""),l=Object(ce.a)(u,2),d=l[0],p=l[1],f=Object(a.useState)(""),j=Object(ce.a)(f,2),h=j[0],S=j[1],b=Object(a.useState)({isStart:!1,isFail:!1,isSuccess:!1,errMessage:""}),E=Object(ce.a)(b,2),x=E[0],O=E[1];function _(){return!!r&&r.id>0&&!!t&&T(d)&&0!==+d&&!!i}return Object(a.useEffect)((function(){x.isStart&&function(e){return fetch(te.backURL+e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).then((function(e){if(e.ok)return e.json();throw new Error("".concat(e.status,": ").concat(e.statusText))}))}("/expense/add",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({expenseGroupId:r.id,expenseId:t,expenseSum:d,expenseDate:i,expenseComment:h})}).then((function(e){e.status>0?(p(""),S(""),O({isStart:!1,isFail:!1,isSuccess:!0,errMessage:""})):O({isStart:!1,isFail:!0,isSuccess:!1,errMessage:e.message})})).catch((function(e){O({isStart:!1,isFail:!0,isSuccess:!1,errMessage:e.message})}))}),[x.isStart]),Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(Fe,{}),Object(he.jsx)(ge.a,{}),Object(he.jsx)(Pe,{}),Object(he.jsx)(ge.a,{}),Object(he.jsx)(Ce.a,{defaultValue:ye()(i,e[0]),size:"large",mode:"date",inputReadOnly:!0,format:e,style:{width:"100%",margin:"5px 0"},value:ye()(i,e[0]),onChange:function(e){e&&o(new Date(e.year(),e.month(),e.date()))}}),Object(he.jsx)(oe.a,{prefix:"\u20bd",suffix:"RUR",placeholder:"\u0441\u0443\u043c\u043c\u0430",size:"large",style:{width:"100%",margin:"5px 0"},value:d,onChange:function(e){var t=e.target.value;T(t)&&p(t)}}),Object(he.jsx)(Le.a,{placeholder:"\u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",autoSize:!0,size:"large",style:{width:"100%",margin:"5px 0"},value:h,onChange:function(e){S(e.target.value)}}),x.isFail&&Object(he.jsx)(Te.a,{message:x.errMessage,type:"error",showIcon:!0}),x.isSuccess&&Object(he.jsx)(Te.a,{message:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430",type:"success",showIcon:!0}),Object(he.jsx)(ue.a,{type:"primary",shape:"round",icon:Object(he.jsx)(ve.a,{}),size:"large",style:{width:"100%",margin:"5px 0"},disabled:!_()||x.isStart,onClick:function(){O({isStart:!0,isFail:!1,isSuccess:!1,errMessage:""})},children:_()?"".concat(n," (").concat(r.name,") : ").concat(d):""}),x.isStart&&Object(he.jsx)(le.a,{size:"large",className:He.a.spinier})]})}var Me=n(248),Ge=n(249),ke=n(253);var De=n(100),Re=n.n(De);function Xe(){var e=r.a.useState(-1),t=Object(ce.a)(e,2),n=t[0],s=t[1],c=ae((function(e){return e.expenseList.expenseList}));return Object(a.useEffect)((function(){se("/expense/getList",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"}},Object(p.a)({},w.requestStepsAC))}),[]),Object(he.jsx)(he.Fragment,{children:c.map((function(e){return Object(he.jsx)("section",{className:Re.a.itemContainer,children:Object(he.jsxs)(Me.b,{bordered:!0,column:{xl:4,sm:2,xs:1},size:"small",className:Re.a.description,extra:Object(he.jsx)(Ge.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c <".concat(e.expenseName,"> \u043d\u0430 <").concat(e.amount,"> \u0440\u0443\u0431\u043b\u0435\u0439 \u0437\u0430 ").concat(e.day," \u0447\u0438\u0441\u043b\u043e?"),visible:e.id===n,cancelText:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",cancelButtonProps:{size:"large"},okText:"\u0414\u0430, \u0443\u0434\u0430\u043b\u0438\u0442\u044c",okButtonProps:{size:"large"},onCancel:function(){s(-1)},onConfirm:function(){s(-1)},children:Object(he.jsx)(ue.a,{type:"primary",size:"large",onClick:function(){s(e.id)},className:Re.a.buttonDelete,children:Object(he.jsx)(ke.a,{})})}),children:[Object(he.jsx)(Me.b.Item,{label:"\u0421\u0442\u0430\u0442\u044c\u044f",children:e.expenseName}),Object(he.jsx)(Me.b.Item,{label:"\u0421\u0443\u043c\u043c\u0430",children:e.amount}),Object(he.jsx)(Me.b.Item,{label:"\u0413\u0440\u0443\u043f\u043f\u0430",children:e.groupName}),Object(he.jsxs)(Me.b.Item,{label:"\u0414\u0430\u0442\u0430",children:[e.period,"-",e.day]}),Object(he.jsx)(Me.b.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",span:2,children:e.description})]})},e.id)}))})}var ze=n(144),We=n.n(ze),Ye=be.a.Header,Be=be.a.Content,Je=be.a.Footer;function Ve(){var e=ae((function(e){return e.menu.selectedIndex})),t=ne();return Object(he.jsxs)(be.a,{children:[Object(he.jsx)(Ye,{children:Object(he.jsxs)(Ee.a,{theme:"dark",mode:"horizontal",selectedKeys:[e],onSelect:function(e){e.item;var n=e.key;e.keyPath,e.selectedKeys,e.domEvent;"1"!==n&&"2"!==n||t({type:F,payload:n}),"3"===n&&t(b.other.authLogoutAC())},children:[Object(he.jsx)(Ee.a.Item,{children:Object(he.jsx)(xe.a,{})},"1"),Object(he.jsx)(Ee.a.Item,{children:Object(he.jsx)(Oe.a,{})},"2"),Object(he.jsx)(Ee.a.Item,{children:Object(he.jsx)(_e.a,{})},"3")]})}),Object(he.jsx)(Be,{style:{padding:"0 5px"},children:Object(he.jsxs)("div",{className:We.a.layout_content,children:["1"===e&&Object(he.jsx)(qe,{}),"2"===e&&Object(he.jsx)(Xe,{})]})}),Object(he.jsx)(Je,{style:{textAlign:"center"},children:"\u0411\u044e\u0434\u0436\u0435\u0442 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432"})]})}se("/references/expenseGroups",{method:"POST"},Object(p.a)({},L.requestStepsAC)),se("/references/expenseItems",{method:"POST"},Object(p.a)({},g.requestStepsAC));var Ke=function(){var e=Object(o.c)((function(e){return e.auth.isAuthenticated}));return Object(he.jsxs)(he.Fragment,{children:[e&&Object(he.jsx)(Ve,{}),!e&&Object(he.jsx)(Se,{})]})};c.a.render(Object(he.jsx)(r.a.StrictMode,{children:Object(he.jsx)(o.a,{store:ee,children:Object(he.jsx)(Ke,{})})}),document.getElementById("root")),i()},49:function(e,t,n){e.exports={main:"login_main__1_ZlM",container:"login_container__36LK3",warningWrapper:"login_warningWrapper__gzvxY",inputControlWrapper:"login_inputControlWrapper__e5JuV",inputControl:"login_inputControl__zjzzz",btnContainer:"login_btnContainer__wsBcb",btn:"login_btn__13-Rj",spinier:"login_spinier__1p1pF"}}},[[235,1,2]]]);
//# sourceMappingURL=main.c7359a7a.chunk.js.map